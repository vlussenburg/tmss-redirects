---
pagination:
  data: episodes.episodes
  size: 1
  alias: episode
permalink: "/{{ episode.episode }}/"
layout: base.njk
eleventyComputed:
  title: "{{ episode.title }} | Episode {{ episode.episode }}"
  description: "{{ episode.description | truncate(160) }}"
  canonical: "{{ site.url }}/{{ episode.episode }}"
  ogType: "article"
  ogTitle: "{{ episode.icon }} {{ episode.title }}"
  ogDescription: "{{ episode.description | truncate(160) }}"
  ogUrl: "{{ site.url }}/{{ episode.episode }}"
  ogImage: "{% if episode.links.youtube %}https://img.youtube.com/vi/{{ episode.links.youtube | youtubeId }}/maxresdefault.jpg{% else %}{{ site.image }}{% endif %}"
---

<main class="episode-page-main">
  {% include "episode-card.njk" %}

  <nav class="episode-nav">
    {% if episode.episode > 1 %}
    <a href="/{{ episode.episode - 1 }}/" class="nav-prev">← Episode {{ episode.episode - 1 }}</a>
    {% else %}
    <span class="nav-prev"></span>
    {% endif %}

    <a href="/" class="nav-all">All episodes</a>

    {% if episode.episode < episodes.episodes.length %}
    <a href="/{{ episode.episode + 1 }}/" class="nav-next">Episode {{ episode.episode + 1 }} →</a>
    {% else %}
    <span class="nav-next"></span>
    {% endif %}
  </nav>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "name": "{{ episode.title | jsonEscape }}",
  "description": "{{ episode.description | jsonEscape }}",
  "episodeNumber": {{ episode.episode }},
  "url": "{{ site.url }}/{{ episode.episode }}",
  "partOfSeries": {
    "@type": "PodcastSeries",
    "@id": "{{ site.url }}/#podcast",
    "name": "{{ site.name }}"
  }{% if episode.links | hasValues %},
  "sameAs": [
    {% set comma = joiner(", ") %}
    {% for platform, url in episode.links %}{% if url %}{{ comma() }}"{{ url }}"{% endif %}{% endfor %}
  ]{% endif %}
}
</script>
